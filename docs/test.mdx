---
description: API 등록부터 마켓플레이스에 게시하기까지의 전반적인 과정 안내
---

// import Highlight from "@site/src/components/Highlight";
// import MenuPath from "@site/src/components/MenuPath";
// import HorizontalStepper from "@site/src/components/HorizontalStepper";
// import TooltipGlossary from "@site/src/components/TooltipGlossary";
// import Link from "@docusaurus/Link";
// import IconExternalLink from "@theme/Icon/ExternalLink";
// import Button from "@site/src/components/Button";

# API 등록하기

이 문서는 APIHub에 API를 등록하여 마켓플레이스에 게시하기까지의 전반적인 과정을 튜토리얼 형식으로 안내합니다.

## 개요

이 튜토리얼에서는 두 가지 타입의 엔드포인트를 추가하여 배포하는 과정을 안내합니다.

- [MOCK 타입의 API 구성하기](#configure-mock)
- [HTTP(S) 타입의 API 구성하기](#configure-http): [Swagger Petstore - OpenAPI 3.0](https://petstore3.swagger.io/#/pet/findPetsByStatus)을 기반으로 ID로 애완동물을 찾는 API(`GET` `/pets/{petId}`)

**MOCK** 타입의 엔드포인트는 API를 제공하는 서버가 준비되지 않은 경우, APIHub에 등록한 API가 제대로 동작하는지 간단하게 테스트 해보기 위하여 사용할 수 있습니다.

**HTTP(S)** 타입의 엔드포인트의 경우, API 요청을 APIHub 게이트웨이를 거쳐 서비스 서버로 전달하는 프락시 역할을 하기 때문에 API를 제공하는 서버가 필요합니다.

두 가지 엔드포인트에 대한 자세한 설명은 [엔드포인트 유형](/docs/provide/api/endpoint#type)을 참고합니다.

### 준비물

- 클라이언트에서 보내는 API 요청을 APIHub 게이트웨이를 거쳐 서비스 서버로 전달하는 과정을 위해 **HTTP(S)** 타입의 엔드포인트를 사용합니다.
- HTTP(S) 타입의 엔드포인트의 경우, API를 제공하는 서버가 필요합니다.

### 결과물

## 절차 안내

1. [제품 추가](/docs/provide/product/create)
1. [API 추가]
1. [API 구성]
1. [API 구성 저장](/docs/provide/product/save) - 리비전 생성
1. 스테이지 추가
1. 배포 - 생성한 스테이지에 구성한 제품의 리비전 배포
1. 제품 정보 설정 - 문서 작성
1. 제품을 마켓플레이스에 공개

## 1. 제품 추가하기

📚 참고: [내 제품 보기](/docs/provide/product/view), [제품 추가하기](/docs/provide/product/create)

1. 카카오디벨로퍼스 계정으로 APIHub에 로그인합니다.

1. **내 제품** 메뉴를 선택합니다.

1. **추가** 버튼을 눌러 새로운 제품을 추가합니다.

제품의 기본 경로는 APIHub에 등록되지 않은 고유한 값만 설정할 수 있습니다. 이 튜토리얼에서는 중복되지 않은 기본 경로를 사용하기 위하여 LDAP ID를 기본 경로로 설정하겠습니다. 기본 경로는 알파벳 소문자, 숫자, 하이픈(-), 언더바(\_)만 입력할 수 있습니다.

```
- 기본 경로: /test
- 제품 이름: 내 첫 번째 제품
- 요약: -
```

## 2. API 추가하기{#add-api}

📚 참고: [새 API 추가하기](/docs/provide/api/create#create-new)

API 구성 페이지에서 **API 추가** 버튼을 눌러 제품 하위에 API를 추가합니다. API를 추가할 때는 새로운 API를 생성하거나 기존 API를 복사해서 추가할 수 있습니다.

이 튜토리얼에서는 새로운 API를 추가 하겠습니다. **API 추가** 창에서 아래와 같이 설정합니다.

```
- 추가 방식: 새 API 추가하기
- API 경로: /pets
- 메서드: GET
- 이름: 테스트용
```

## 3. MOCK 타입의 API 구성하기 {#configure-mock}

새로 추가한 API는 [MOCK 타입](/docs/provide/api/endpoint#mock)으로 구성하겠습니다.

📚 참고: [엔드포인트 설정하기](/docs/provide/api/endpoint)

API 구성 페이지의 **엔드포인트** 탭을 눌러 아래와 같이 설정합니다.

```
- 엔드포인트 타입: MOCK
- 상태 코드: 200 OK
- 응답 헤더: Content-Type: application/json
- 응답 바디:
  {
    "hello": "world!"
  }
```

## 4. 기존 API를 복사해서 추가하기 {#copy-api}

📚 참고: [기존 API 복사하기](/docs/provide/api/create#copy)

API 구성 페이지에서 **API 추가** 버튼을 눌러 제품 하위에 API를 추가합니다.

**API 추가** 창에서 아래와 같이 설정합니다.

```
- 추가 방식: 기존 API 복사해서 추가하기
- 복사할 API: 2번에서 생성한 API 선택
- API 경로: pets/{petId}
- 메서드: GET
- 이름: ID로 애완동물 정보 가져오기
```

## 5. HTTP(S) 타입의 API 구성하기 {#configure-http}

API 구성 시 엔드포인트는 반드시 입력해야 하는 정보입니다. 이 외에 다른 설정은 생략할 수 있으며, 설정 순서는 정해져 있지 않습니다.

이 튜토리얼에서는 아래 순서로 설명합니다.

### 5-1. API 기본 정보 입력 {#api-info}

📚 참고: [API 기본 정보 설정하기](/docs/provide/api/info)

API 구성 페이지의 **기본 정보** 탭에서 API 이름을 수정하거나 API 설명을 입력할 수 있습니다. API 추가 시 생략했던 API 설명을 입력하겠습니다.

```
- API 설명: 요청한 ID를 가진 애완동물 정보
```

### 5-2. 엔드포인트 설정 (필수) {#endpoint}

📚 참고: [엔드포인트 설정하기](/docs/provide/api/endpoint)

API 구성 페이지의 **엔드포인트** 탭을 눌러 아래와 같이 설정합니다.

엔드포인트의 타겟 URL란에는 서비스 서버의 URL을 입력합니다. 이 튜토리얼에서는 테스트를 위해 준비된 아래 예제를 사용하겠습니다. 서버가 준비되지 않은 경우, 테스트를 위해 아래 타겟 URL을 사용해도 좋습니다.

```
- 엔드포인트 타입: HTTP(S)
- 타겟 URL: https://apihub-example-petstore.devel.kakao.com/pets/{petId}
- 타임아웃 시간: 3000
- 응답 캐시 사용: 활성화
- 캐시 만료 시간: 기본값 사용
```

### 5-3. 파라미터 정의 {#parameter}

📚 참고: [파라미터 정의하기](/docs/provide/api/parameter), [스키마 정의하기](/docs/provide/api/schema)

API 구성 페이지의 **파라미터** 탭을 눌러 아래와 같이 설정합니다. API 경로에 템플릿 변수를 넣으면 API 경로에 입력했던 값에 따라 경로 파라미터의 이름(petId)이 자동으로 설정됩니다.

설정 화면에서 파라미터 설명을 입력하고, **스키마 수정** 버튼을 눌러 데이터 타입을 정의합니다.

```
- 설명: 검색할 애완동물의 ID
- 스키마: 직접 정의하기
  - 타입: Integer
```

### 5-4. 응답 정의 {#response}

📚 참고: [응답 정의하기](/docs/provide/api/response)

:::important 중요

**파라미터**, **요청 바디**, **응답** 탭에서 정의한 설정은 API 사용자가 확인할 수 있는 [API 명세](/docs/consume/api-spec)를 작성하기 위함으로 실제 동작과 다를 수 있습니다.

정의한 명세와 다르게 요청하거나 응답해도 APIHub에서는 그대로 전달합니다. 단, 요청의 경우, [요청 유효성 검증 프로세서](/docs/provide/api/validation)를 사용하면 클라이언트가 유효한 요청을 보냈는지 검증할 수 있습니다.

:::

1. API 구성 페이지의 **응답** 탭을 누릅니다.

1. **상태 코드 추가** 버튼을 누릅니다.

1. 상태 코드 정보를 입력합니다.

```
- 상태 코드: 200
- 설명: 성공 시 응답 정보
```

3. **콘텐트 타입 추가** 버튼을 누릅니다.

```
- 콘텐트 타입: application/json
```

4. **응답 예시** 입력란에 아래와 같이 입력합니다.

```js
{
  "id": 10,
  "name": "doggie",
  "category": {
    "id": 1,
    "name": "Dogs"
  },
  "photoUrls": [
    "string"
  ],
  "tags": [
    {
      "id": 0,
      "name": "string"
    }
  ],
  "status": "available"
}
```

6. 동일한 상태 코드에 또 다른 콘텐트 타입을 추가해 보겠습니다. **콘텐트 타입 추가** 버튼을 누릅니다.

```
- 콘텐트 타입: application/xml
```

7. 응답 예시를 입력합니다.

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<pet>
  <id>10</id>
  <name>doggie</name>
  <category>
    <id>1</id>
    <name>Dogs</name>
  </category>
  <photoUrls>
    <photoUrl>string</photoUrl>
  </photoUrls>
  <tags>
    <tag>
      <id>0</id>
      <name>string</name>
    </tag>
  </tags>
  <status>available</status>
</pet>
```

### 5-5. 프로세서 추가 {#process}

📚 참고: [프로세서 추가하기](/docs/provide/api/processor)

API 구성 페이지의 **프로세서** 탭에서 필요한 프로세서를 추가합니다. 이 튜토리얼에서는 유효한 요청을 보냈는지 확인하는 유효성 검사 프로세서만 추가하겠습니다.

1. **요청 유효성 검사** 항목을 활성화합니다.

1. 검증 대상에서 **경로 파라미터**를 선택합니다.

## 4. API 구성 저장하기 {#save}

📚 참고: [API 구성 저장하기](/docs/provide/product/save), [핵심 개념 > 리비전](/docs/getting-started/terms/revision)

API 구성 페이지 상단에서 **저장** 버튼을 눌러 설정을 저장합니다. 저장할 때마다 리비전 번호가 하나씩 증가합니다.

[2. API 추가하기](#add-api)부터 [5. HTTP(S) 타입의 API 구성하기](#configure-http) 단계까지 구성한 두 가지의 API 정보가 제품에 저장됩니다.

## 5. 제품 배포하기 {#deploy}

📚 참고: [스테이지 추가하기](/docs/provide/stage/create), [배포 관리하기](/docs/provide/stage/deploy)

1. **스테이지** 메뉴에서 스테이지를 추가합니다.

```
- 기본 경로: v1
- 설명: -
- 마켓플레이스에 공개: 비공개
```

2. 생성한 스테이지 영역에서 **배포** 버튼을 눌러 최신 리비전을 배포합니다.

```
- 리비전: 마지막으로 수정한 최신 리비전
- 메모: 테스트
```

3. 배포가 완료되었는지 확인하기 위해 스테이지 이름의 오른쪽에 문구가 **미배포**에서 **배포 완료**로 변경되었는지 확인합니다.

배포한 API를 호출해보려면 [다음 단계](/docs/tutorial/test)로 이동합니다.
